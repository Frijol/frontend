webpackJsonp([3],{745:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){switch(t.type){case"createTable":return s(t);case"sql":return e.migration.statement}}function s(e){var t=e.createTable,n=t.columns.map(function(e){return e.name+" "+e.type}).join(",");return"CREATE TABLE "+t.name+" ("+n+")"}function c(e,t){var n=[t.params.user,t.params.dataset].join("."),r=(0,g.selectLocalMigrationById)(e,"new");return Object.assign({address:n,migration:r,user:(0,h.selectSessionUser)(e),dataset:(0,E.selectDatasetByAddress)(e,n),validation:(0,v["default"])(r)},t)}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(8),p=r(d),m=n(303),h=n(305),E=n(388),y=n(304),b=n(764),g=n(760),T=n(790),v=r(T),_=n(758),I=r(_),O=n(753),M=r(O),A=n(755),C=r(A),R=n(762),N=r(R),S=n(751),w=r(S),P=n(847),j=r(P),G=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={loading:!e.dataset,showErrors:!1,type:"",createTable:{name:"",columns:[]},dropTable:""},["handleChange","handleSave","handleSetMigrationType","handleChangeMigrationState"].forEach(function(e){return n[e]=n[e].bind(n)}),n}return l(t,e),f(t,[{key:"componentWillMount",value:function(){this.props.loadDatasetByAddress(this.props.address,["schema"]),this.props.newMigration(this.props.address,{author:this.props.user})}},{key:"componentWillReceiveProps",value:function(e){e.address!=this.props.address?(this.props.newMigration(e.address,{author:this.props.user}),this.setState({loading:!e.dataset})):e.dataset&&this.state.loading&&this.setState({loading:!1})}},{key:"handleSetMigrationType",value:function(e){this.setState({type:e.target.value})}},{key:"handleChangeMigrationState",value:function(e,t,n,r){this.setState(a({},e,Object.assign({},this.state[e],a({},t,n)))),this.props.updateMigration(Object.assign({},this.props.migration,{sql:u(this.props,this.state)}))}},{key:"handleChange",value:function(e,t,n){var r=Object.assign({},this.props.migration);r[e]=t,this.props.updateMigration(r)}},{key:"handleSave",value:function(e){e.preventDefault(),console.log(u(this.props,this.state)),this.props.validation.isValid||this.state.showErrors?this.props.validation.isValid&&this.props.saveMigration(this.props.migration):this.setState({showErrors:!0})}},{key:"renderMigrationEditor",value:function(e,t){var n=this.state,r=(n.loading,n.showErrors),a=n.createTable,o=this.props,i=(o.user,o.dataset),l=o.migration,u=o.validation;switch(t.type){case"none":return;case"createTable":return p["default"].createElement("div",{className:"migration createTable"},p["default"].createElement(M["default"],{label:"New Table Name",name:"name",value:a.name,onChange:this.handleChangeMigrationState.bind(this,"createTable")}),p["default"].createElement("label",null,"Columns:"),p["default"].createElement(j["default"],{name:"columns",columns:a.columns,onChange:this.handleChangeMigrationState.bind(this,"createTable")}));case"dropTable":return p["default"].createElement("div",{className:"migration dropTable"},p["default"].createElement("div",{className:"form-group"},p["default"].createElement("label",{className:"form-label"},"table to drop:"),p["default"].createElement("select",{className:"form-control"},i.schema.map(function(e,t){return p["default"].createElement("option",{key:t},e.name)}))));case"sql":return p["default"].createElement("div",null,p["default"].createElement(C["default"],{label:"SQL",name:"sql",value:l.sql,showError:r,error:u.sql,onChange:this.handleChange}))}return p["default"].createElement("div",{className:"migration"})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.showErrors,r=this.props,a=r.user,o=r.dataset,i=r.migration,l=r.validation;return a?t?p["default"].createElement("div",{className:"newMigration"},p["default"].createElement(w["default"],null)):i?p["default"].createElement("div",{id:"wrapper"},p["default"].createElement("div",{className:"container"},p["default"].createElement("div",{className:"col-sm-8 col-md-8 col-md-offset-2"},p["default"].createElement("form",{className:"newMigration"},p["default"].createElement("h3",null,"New Migration"),p["default"].createElement(C["default"],{label:"Description",name:"description",value:i.description,showError:n,error:l.description,onChange:this.handleChange}),p["default"].createElement("div",{className:"form-group"},p["default"].createElement("label",null,"Migration Type"),p["default"].createElement("select",{className:"form-control",value:this.state.type,onChange:this.handleSetMigrationType},p["default"].createElement("option",{value:"none"},"none"),p["default"].createElement("option",{value:"createTable"},"create table"),p["default"].createElement("option",{value:"dropTable"},"drop table"),p["default"].createElement("option",{value:"sql"},"sql"))),this.renderMigrationEditor(this.props,this.state),p["default"].createElement("br",null),p["default"].createElement("button",{className:"btn btn-large btn-primary",disabled:!l.isValid&&n||!this.state.type,onClick:this.handleSave},"Create Migration")),p["default"].createElement("section",{"class":"col-md-12"},p["default"].createElement("hr",null),o.schema?p["default"].createElement(N["default"],{schema:o.schema}):p["default"].createElement("p",null,"This dataset currently has no schema"))))):p["default"].createElement("div",{className:"dataset container"},p["default"].createElement("p",null,"No Migration")):p["default"].createElement(I["default"],null)}}]),t}(p["default"].Component);G.propTypes={address:d.PropTypes.string.isRequired,error:d.PropTypes.string,user:d.PropTypes.object,dataset:d.PropTypes.object,migration:d.PropTypes.object,validation:d.PropTypes.object,loadDatasetByAddress:d.PropTypes.func.isRequired,newMigration:d.PropTypes.func.isRequired,updateMigration:d.PropTypes.func.isRequired,saveMigration:d.PropTypes.func.isRequired},G.defaultProps={},t["default"]=(0,m.connect)(c,{loadDatasetByAddress:y.loadDatasetByAddress,newMigration:b.newMigration,updateMigration:b.updateMigration,saveMigration:b.saveMigration})(G)},751:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s["default"].createElement("div",{className:"spinner"},s["default"].createElement("div",{"class":"rect1"}),s["default"].createElement("div",{"class":"rect2"}),s["default"].createElement("div",{"class":"rect3"}),s["default"].createElement("div",{"class":"rect4"}),s["default"].createElement("div",{"class":"rect5"}))}}]),t}(s["default"].Component);t["default"]=c,c.propTypes={},c.defaultProps={}},753:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.name,r=e.type,a=e.showError,o=e.error,i=e.value,l=e.placeholder,u=e.onChange;return s["default"].createElement("div",{className:o&&a?"validFormField form-group has-error":"validFormField form-group"},t?s["default"].createElement("label",{"class":"control-label","for":n},t):void 0,s["default"].createElement("input",{id:n,name:n,type:r,className:"form-control",value:i,placeholder:l,onChange:function(e){u(n,e.target.value,e)}}),""!=o&&a?s["default"].createElement("div",{className:"control-label"},o):void 0)}}]),t}(s["default"].Component);t["default"]=c,c.propTypes={name:u.PropTypes.string.isRequired,label:u.PropTypes.string,type:u.PropTypes.string.isRequired,value:u.PropTypes.string.isRequired,placeholder:u.PropTypes.string,error:u.PropTypes.string,showError:u.PropTypes.bool,onChange:u.PropTypes.func.isRequired},c.defaultProps={name:void 0,type:"text",error:void 0,showError:!0,placeholder:""}},755:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.name,r=e.type,a=e.showError,o=e.error,i=e.value,l=e.placeholder,u=e.onChange;return s["default"].createElement("div",{className:o&&a?"validFormField form-group has-error":"validFormField form-group"},t?s["default"].createElement("label",{"for":n},t):void 0,s["default"].createElement("textarea",{id:n,name:n,type:r,className:"form-control",value:i,placeholder:l,onChange:function(e){u(n,e.target.value,e)}}),""!=o&&a?s["default"].createElement("div",{className:"control-label"},o):void 0)}}]),t}(s["default"].Component);t["default"]=c,c.propTypes={name:u.PropTypes.string.isRequired,label:u.PropTypes.string,type:u.PropTypes.string.isRequired,value:u.PropTypes.string.isRequired,placeholder:u.PropTypes.string,error:u.PropTypes.string,showError:u.PropTypes.bool,onChange:u.PropTypes.func.isRequired},c.defaultProps={name:void 0,type:"text",error:void 0,showError:!0,placeholder:""}},758:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s["default"].createElement("div",{id:"wrapper",className:"sessionRequired"},s["default"].createElement("div",{className:"container"},s["default"].createElement("div",{className:"col-md-12"},s["default"].createElement("h3",{className:"center-text"},"You must be logged-in to do this"))))}}]),t}(s["default"].Component);t["default"]=c,c.propTypes={},c.defaultProps={}},760:function(e,t,n){"use strict";function r(e,t){return e.entities.migrations[t]}function a(e,t,n){var r=e.entities.migrations,a=(0,u.selectDatasetByAddress)(e,t),o=Object.keys(r).find(function(e){return r[e].number==n&&r[e].dataset==a.id||e==n});return o?r[o]:void 0}function o(e,t){var n=e.entities.migrations;return Object.keys(n).reduce(function(e,r){var a=n[r];return a.dataset==t&&e.push(a),e},[])}function i(e,t){return e.locals.migrations[t]}function l(e,t,n){var r=e.locals.migrations,a=Object.keys(r).find(function(e){return r[e].number==n&&r[e].address==t||e==n});return a?r[a]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.selectMigrationById=r,t.selectMigrationByNumber=a,t.selectDatasetMigrations=o,t.selectLocalMigrationById=i,t.selectLocalMigrationByNumber=l;var u=n(388)},761:function(e,t){"use strict";function n(e){return new i(e)}function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return null!=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.exec(e)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=n;var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=function(e){return this.input=e,this.errors=[],this};i.prototype.required=function(){return this.input||this.errors.push("required"),this},i.prototype.handle=function(){var e=this.input;return"string"!=typeof e?this.errors.push("handle must be a string"):null==/^[a-z0-9_-]+$/i.exec(e)?this.errors.push("handle can only contain a-z, 0-9, _, or -"):e.length<2?this.errors.push("handle too short. Min 2 characters."):e.length>50&&this.errors.push("handle too long. 50 characters max."),this},i.prototype.name=function(){var e=this.input;return"string"!=typeof e?this.errors.push("invalid name"):e.length>100&&this.errors.push("name too long"),this},i.prototype.model=function(){var e=this.input||"";return"object"==("undefined"==typeof e?"undefined":a(e))&&(e=e.id),r(e)||this.errors.push("model has invalid id"),this},i.prototype.user=function(){return this},i.prototype.email=function(){var e=this.input||"";return null==o.exec(e)&&this.errors.push("invalid email"),this},i.prototype.message=function(){return this.errors.length>0?this.errors[0]:void 0}},762:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return function(n,r,a){if(!t){var o=e[a].name;if("id"==o||"created"==o||"updated"==o)return n}return n.push(r),n}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),c=r(s),f=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.schema,n=e.showStdCols;return c["default"].createElement("div",{"class":"table-resizable"},c["default"].createElement("h6",null,"DATASET SCHEMA:"),c["default"].createElement("div",{"class":"row"},t.map(function(e,t){var r=e.columns.reduce(l(e.columns,n),[]);return c["default"].createElement("div",{"class":"col-md-6",key:t},c["default"].createElement("small",null,"TABLE:"),c["default"].createElement("h3",null,e.name),c["default"].createElement("small",null,"COLUMNS:"),c["default"].createElement("table",{"class":"table table-bordered table-condensed"},c["default"].createElement("thead",null,c["default"].createElement("tr",{className:"name"},r.map(function(e,t){return c["default"].createElement("td",{key:t},c["default"].createElement("h5",{style:{marginRight:15}},e.name))})),c["default"].createElement("tr",{className:"type"},r.map(function(e,t){return c["default"].createElement("td",{key:t},c["default"].createElement("small",{className:"dt-"+e.type},e.type))})),c["default"].createElement("tr",{classNam:"description"},r.map(function(e,t){return c["default"].createElement("td",{key:t},e.description)})))),c["default"].createElement("hr",null))})))}}]),t}(c["default"].Component);t["default"]=f,f.propTypes={schema:s.PropTypes.array.isRequired,showStdCols:s.PropTypes.bool.isRequired},f.defaultProps={showStdCols:!1}},764:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return function(n,r){var a=(0,O.selectDatasetByAddress)(r(),e);return a?(t=Object.assign({dataset:a,sql:"",description:""},t),n((0,_.newLocalModel)(T["default"].MIGRATION,A,t))):void n((0,M.fetchDatasetByAddress)(e)).then(function(a){var o=(0,O.selectDatasetByAddress)(r(),e);return a.type===M.DATASET_SUCCESS?(t=Object.assign({sql:"",description:""},t,{dataset:o}),n((0,_.newLocalModel)(T["default"].MIGRATION,A,t))):null})}}function i(e){return(0,_.updateLocalModel)(T["default"].MIGRATION,C,e)}function l(e){arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return a({},b.CALL_API,{types:[R,N,S],endpoint:"/migrations/"+e,schema:T["default"].MIGRATION})}function u(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return function(n,r){var a=(0,I.selectMigrationById)(r(),e);return a&&t.every(function(e){return a.hasOwnProperty(e)})?null:l(e,t)}}function s(e,t){arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return a({},b.CALL_API,{types:[R,N,S],endpoint:"/migrations?address="+e+"&number="+t,schema:T["default"].MIGRATION})}function c(e,t){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return function(r,a){var o=(0,I.selectMigrationByNumber)(a(),e,t);return o&&n.every(function(e){return o.hasOwnProperty(e)})?null:r(s(e,t,n))}}function f(e){return e.id&&"new"!=e.id?function(t,n){return t(a({},b.CALL_API,{types:[w,P,j],endpoint:"/migrations/"+e.id,method:"PUT",schema:T["default"].MIGRATION,data:e})).then(function(e){if(e.type==P)return t((0,v.setMessage)("migration updated")),setTimeout(function(){return t((0,v.resetMessage)())},5e3),t((0,y.push)("/console"))})}:d(e)}function d(e){return function(t,n){return t(a({},b.CALL_API,{types:[G,L,U],endpoint:"/migrations",method:"POST",schema:T["default"].MIGRATION,data:Object.assign({},e,{id:void 0})})).then(function(e){if(e.type===L&&e.response.entities.migrations){t((0,v.setMessage)("migration created")),setTimeout(function(){t((0,v.resetMessage)())},3500);var n=e.response.entities,r=n.datasets,a=n.migrations,o=r[Object.keys(r)[0]].address,i=a[Object.keys(a)[0]],l=i.number||i.id;return o=o.replace(".","/",-1),t((0,y.push)("/"+o+"/migrations/"+l))}})}}function p(e){return function(t,n){return t(a({},b.CALL_API,{types:[k,D,q],endpoint:e.id?"/migrations/"+e.id+"/execute":"/migrations?execute=true",method:"POST",schema:T["default"].MIGRATION,data:e})).then(function(e){return e.type===D?(t((0,v.setMessage)("migration executed")),setTimeout(function(){return t((0,v.resetMessage)())},5e3),t((0,y.push)("/console"))):null})}}function m(e){return function(t,n){return t(a({},b.CALL_API,{types:[F,B,x],endpoint:e.id?"/migrations/"+e.id+"/decline":"/migrations?decline=true",method:"POST",schema:T["default"].MIGRATION,data:e})).then(function(e){return e.type==B?(t((0,v.setMessage)("migration declined")),setTimeout(function(){return t((0,v.resetMessage)())},5e3),t((0,y.push)("/console"))):null})}}function h(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return function(n,r){return n(a({},b.CALL_API,{types:[Q,V,H],endpoint:"/migrations/"+e,method:"DELETE",schema:T["default"].MIGRATION})).then(function(r){return r.type===V&&(n((0,v.removeModel)(T["default"].MIGRATION,e)),""!=t&&n((0,y.push)(t)),n((0,v.setMessage)("migration deleted")),setTimeout(function(){return n((0,v.resetMessage)())},5e3)),null})}}function E(e,t){return function(n,r){var a=(0,I.selectMigrationByNumber)(r(),e,t);return a?n((0,_.editModel)(T["default"].MIGRATION,X,a)):n(s(e,t)).then(function(a){if(a.type===N){var o=(0,I.selectMigrationByNumber)(r(),e,t);return n((0,_.editModel)(T["default"].MIGRATION,X,o))}return null})}}Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_MIGRATION=t.MIGRATION_DELETE_FAIL=t.MIGRATION_DELETE_SUCCESS=t.MIGRATION_DELETE_REQUEST=t.MIGRATION_DECLINE_FAIL=t.MIGRATION_DECLINE_SUCCESS=t.MIGRATION_DECLINE_REQUEST=t.MIGRATION_EXECUTE_FAIL=t.MIGRATION_EXECUTE_SUCCESS=t.MIGRATION_EXECUTE_REQUEST=t.MIGRATION_CREATE_FAIL=t.MIGRATION_CREATE_SUCCESS=t.MIGRATION_CREATE_REQUEST=t.MIGRATION_SAVE_FAIL=t.MIGRATION_SAVE_SUCCESS=t.MIGRATION_SAVE_REQUEST=t.MIGRATION_FETCH_FAIL=t.MIGRATION_FETCH_SUCCESS=t.MIGRATION_FETCH_REQUEST=void 0,t.newMigration=o,t.updateMigration=i,t.fetchMigration=l,t.loadMigration=u,t.fetchMigrationByNumber=s,t.loadMigrationByNumber=c,t.saveMigration=f,t.executeMigration=p,t.declineMigration=m,t.deleteMigration=h,t.editMigration=E;var y=n(71),b=n(102),g=n(113),T=r(g),v=n(112),_=n(306),I=n(760),O=n(388),M=n(304),A="MIGRATION_NEW",C="MIGRATION_UPDATE",R=t.MIGRATION_FETCH_REQUEST="MIGRATION_FETCH_REQUEST",N=t.MIGRATION_FETCH_SUCCESS="MIGRATION_FETCH_SUCCESS",S=t.MIGRATION_FETCH_FAIL="MIGRATION_FETCH_FAIL",w=t.MIGRATION_SAVE_REQUEST="MIGRATION_SAVE_REQUEST",P=t.MIGRATION_SAVE_SUCCESS="MIGRATION_SAVE_SUCCESS",j=t.MIGRATION_SAVE_FAIL="MIGRATION_SAVE_FAIL",G=t.MIGRATION_CREATE_REQUEST="MIGRATION_CREATE_REQUEST",L=t.MIGRATION_CREATE_SUCCESS="MIGRATION_CREATE_SUCCESS",U=t.MIGRATION_CREATE_FAIL="MIGRATION_CREATE_FAIL",k=t.MIGRATION_EXECUTE_REQUEST="MIGRATION_EXECUTE_REQUEST",D=t.MIGRATION_EXECUTE_SUCCESS="MIGRATION_EXECUTE_SUCCESS",q=t.MIGRATION_EXECUTE_FAIL="MIGRATION_EXECUTE_FAIL",F=t.MIGRATION_DECLINE_REQUEST="MIGRATION_DECLINE_REQUEST",B=t.MIGRATION_DECLINE_SUCCESS="MIGRATION_DECLINE_SUCCESS",x=t.MIGRATION_DECLINE_FAIL="MIGRATION_DECLINE_FAIL",Q=t.MIGRATION_DELETE_REQUEST="MIGRATION_DELETE_REQUEST",V=t.MIGRATION_DELETE_SUCCESS="MIGRATION_DELETE_SUCCESS",H=t.MIGRATION_DELETE_FAIL="MIGRATION_DELETE_FAIL",X=t.EDIT_MIGRATION="EDIT_MIGRATION"},790:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={dataset:(0,i["default"])(e.dataset).required().model().message(),author:(0,i["default"])(e.author).required().model().message(),sql:(0,i["default"])(e.sql).required().message(),description:void 0};return t.isValid=Object.keys(t).every(function(e){return void 0==t[e]}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var o=n(761),i=r(o)},845:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,r=e.onChange;return s["default"].createElement("select",{name:t,value:n,onChange:function(e){r(t,e.target.value,e)}},s["default"].createElement("option",{value:""},"unknown"),s["default"].createElement("option",{value:"integer"},"Integer"),s["default"].createElement("option",{value:"float"},"Float"),s["default"].createElement("option",{value:"text"},"Text"),s["default"].createElement("option",{value:"date"},"Date"),s["default"].createElement("option",{value:"time"},"Time"),s["default"].createElement("option",{value:"boolean"},"Boolean"))}}]),t}(s["default"].Component);t["default"]=c,c.propTypes={name:u.PropTypes.string.isRequired,value:u.PropTypes.string,onChange:u.PropTypes.func.isRequired},c.defaultProps={}},847:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=r(u),c=n(753),f=r(c),d=n(845),p=r(d),m=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.columns,r=e.onChange;return s["default"].createElement("div",{className:"tableColumnEditor"},n.map(function(e,a){return s["default"].createElement("div",{className:"column",key:a},s["default"].createElement(f["default"],{name:"name",value:e.name,onChange:function(o,i,l){var u=n.slice(0,n.length);u.splice(a,1,Object.assign({},e,{name:i})),r(t,u,l)}}),s["default"].createElement(p["default"],{name:"type",value:e.type,onChange:function(o,i,l){var u=n.slice(0,n.length);u.splice(a,1,Object.assign({},e,{type:i})),r(t,u,l)}}),s["default"].createElement("a",{className:"remove",onClick:function(e){var o=n.slice(0,n.length);o.splice(a,1),r(t,o,e)}},"remove"))}),s["default"].createElement("button",{className:"btn btn-small btn-success",onClick:function(e){e.preventDefault(),r(t,n.concat([{name:"",type:""}]),e)}},"+"))}}]),t}(s["default"].Component);t["default"]=m,m.propTypes={name:u.PropTypes.string.isRequired,columns:u.PropTypes.array.isRequired,validation:u.PropTypes.array,onChange:u.PropTypes.func.isRequired},m.defaultProps={}}});