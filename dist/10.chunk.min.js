webpackJsonp([10],{718:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=t.params,r=n.number,i=n.user,o=n.dataset,a=[i,o].join(".");return Object.assign({address:a,number:r,migration:(0,I.selectMigrationByNumber)(e,a,r)},t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(9),l=r(c),d=n(299),E=(n(100),n(736)),I=n(729),f=n(724),T=r(f),_=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={loading:!e.migration},["handleExecute","handleDecline"].forEach(function(e){return n[e]=n[e].bind(n)}),n}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.props.loadMigrationByNumber(this.props.address,this.props.number)}},{key:"componentWillReceiveProps",value:function(e){e.address!=this.props.address||e.number!=this.props.number?(this.props.loadMigrationByNumber(e.address,e.number),this.setState({loading:!0})):e.migration&&this.state.loading&&this.setState({loading:!1})}},{key:"handleExecute",value:function(){confirm("are you sure you want to execute this migration?")&&this.props.executeMigration(this.props.migration)}},{key:"handleDecline",value:function(){confirm("are you sure you want to decline this migration")&&this.props.declineMigration(this.props.migration)}},{key:"render",value:function(){var e=this.state.loading,t=this.props,n=(t.address,t.number,t.migration);return e?l["default"].createElement("div",{className:"spinner"},l["default"].createElement(T["default"],null)):n?l["default"].createElement("div",{id:"wrapper"},l["default"].createElement("div",{className:"migration container"},l["default"].createElement("p",null,"Migration"),l["default"].createElement("h3",null,n.number||n.id),l["default"].createElement("hr",null),l["default"].createElement("h4",null,n.sql),l["default"].createElement("p",null,n.description),l["default"].createElement("button",{className:"btn btn-large btn-warning",onClick:this.handleDecline},"Decline"),l["default"].createElement("button",{className:"btn btn-large btn-success",onClick:this.handleExecute},"Execute"))):l["default"].createElement("div",{className:"notFound"},l["default"].createElement("h1",null,"Not Found"))}}]),t}(l["default"].Component);_.propTypes={address:c.PropTypes.string.isRequired,number:c.PropTypes.string.isRequired,migration:c.PropTypes.object,loadMigrationByNumber:c.PropTypes.func.isRequired,executeMigration:c.PropTypes.func.isRequired,declineMigration:c.PropTypes.func.isRequired},_.defaultProps={},t["default"]=(0,d.connect)(u,{loadMigrationByNumber:E.loadMigrationByNumber,executeMigration:E.executeMigration,declineMigration:E.declineMigration})(_)},724:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),l=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"spinner"},c["default"].createElement("div",{"class":"rect1"}),c["default"].createElement("div",{"class":"rect2"}),c["default"].createElement("div",{"class":"rect3"}),c["default"].createElement("div",{"class":"rect4"}),c["default"].createElement("div",{"class":"rect5"}))}}]),t}(c["default"].Component);t["default"]=l,l.propTypes={},l.defaultProps={}},729:function(e,t,n){"use strict";function r(e,t){return e.entities.migrations[t]}function i(e,t,n){var r=e.entities.migrations,i=(0,s.selectDatasetByAddress)(e,t),o=Object.keys(r).find(function(e){return r[e].number==n&&r[e].dataset==i.id||e==n});return o?r[o]:void 0}function o(e,t){var n=e.entities.migrations;return Object.keys(n).reduce(function(e,r){var i=n[r];return i.dataset==t&&e.push(i),e},[])}function a(e,t){return e.locals.migrations[t]}function u(e,t,n){var r=e.locals.migrations,i=Object.keys(r).find(function(e){return r[e].number==n&&r[e].address==t||e==n});return i?r[i]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.selectMigrationById=r,t.selectMigrationByNumber=i,t.selectDatasetMigrations=o,t.selectLocalMigrationById=a,t.selectLocalMigrationByNumber=u;var s=n(375)},736:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return function(n,r){var i=(0,N.selectDatasetByAddress)(r(),e);return i?(t=Object.assign({dataset:i,sql:"",description:""},t),n((0,R.newLocalModel)(m["default"].MIGRATION,S,t))):void n((0,y.fetchDatasetByAddress)(e)).then(function(i){var o=(0,N.selectDatasetByAddress)(r(),e);return i.type===y.DATASET_SUCCESS?(t=Object.assign({sql:"",description:""},t,{dataset:o}),n((0,R.newLocalModel)(m["default"].MIGRATION,S,t))):null})}}function a(e){return(0,R.updateLocalModel)(m["default"].MIGRATION,h,e)}function u(e){arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return i({},M.CALL_API,{types:[C,b,G],endpoint:"/migrations/"+e,schema:m["default"].MIGRATION})}function s(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return function(n,r){var i=(0,g.selectMigrationById)(r(),e);return i&&t.every(function(e){return i.hasOwnProperty(e)})?null:u(e,t)}}function c(e,t){arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return i({},M.CALL_API,{types:[C,b,G],endpoint:"/migrations?address="+e+"&number="+t,schema:m["default"].MIGRATION})}function l(e,t){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return function(r,i){var o=(0,g.selectMigrationByNumber)(i(),e,t);return o&&n.every(function(e){return o.hasOwnProperty(e)})?null:r(c(e,t,n))}}function d(e){return e.id&&"new"!=e.id?function(t,n){return t(i({},M.CALL_API,{types:[v,L,U],endpoint:"/migrations/"+e.id,method:"PUT",schema:m["default"].MIGRATION,data:e})).then(function(e){if(e.type==L)return t((0,O.setMessage)("migration updated")),setTimeout(function(){return t((0,O.resetMessage)())},5e3),t((0,p.push)("/console"))})}:E(e)}function E(e){return function(t,n){return t(i({},M.CALL_API,{types:[P,D,F],endpoint:"/migrations",method:"POST",schema:m["default"].MIGRATION,data:Object.assign({},e,{id:void 0})})).then(function(e){if(e.type===D&&e.response.entities.migrations){t((0,O.setMessage)("migration created")),setTimeout(function(){return(0,O.resetMessage)()},5e3);var n=e.response.entities,r=n.datasets,i=n.migrations,o=r[Object.keys(r)[0]].address,a=i[Object.keys(i)[0]],u=a.number||a.id;return o=o.replace(".","/",-1),t((0,p.push)("/"+o+"/migrations/"+u))}})}}function I(e){return function(t,n){return t(i({},M.CALL_API,{types:[j,w,B],endpoint:e.id?"/migrations/"+e.id+"/execute":"/migrations?execute=true",method:"POST",schema:m["default"].MIGRATION,data:e})).then(function(e){return e.type===w?(t((0,O.setMessage)("migration executed")),setTimeout(function(){return t((0,O.resetMessage)())},5e3),t((0,p.push)("/console"))):null})}}function f(e){return function(t,n){return t(i({},M.CALL_API,{types:[Q,k,x],endpoint:e.id?"/migrations/"+e.id+"/decline":"/migrations?decline=true",method:"POST",schema:m["default"].MIGRATION,data:e})).then(function(e){return e.type==k?(t((0,O.setMessage)("migration declined")),setTimeout(function(){return t((0,O.resetMessage)())},5e3),t((0,p.push)("/console"))):null})}}function T(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return function(n,r){return n(i({},M.CALL_API,{types:[H,V,X],endpoint:"/migrations/"+e,method:"DELETE",schema:m["default"].MIGRATION})).then(function(r){return r.type===V&&(n((0,O.removeModel)(m["default"].MIGRATION,e)),""!=t&&n((0,p.push)(t)),n((0,O.setMessage)("migration deleted")),setTimeout(function(){return n((0,O.resetMessage)())},5e3)),null})}}function _(e,t){return function(n,r){var i=(0,g.selectMigrationByNumber)(r(),e,t);return i?n((0,R.editModel)(m["default"].MIGRATION,q,i)):n(c(e,t)).then(function(i){if(i.type===b){var o=(0,g.selectMigrationByNumber)(r(),e,t);return n((0,R.editModel)(m["default"].MIGRATION,q,o))}return null})}}Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_MIGRATION=t.MIGRATION_DELETE_FAIL=t.MIGRATION_DELETE_SUCCESS=t.MIGRATION_DELETE_REQUEST=t.MIGRATION_DECLINE_FAIL=t.MIGRATION_DECLINE_SUCCESS=t.MIGRATION_DECLINE_REQUEST=t.MIGRATION_EXECUTE_FAIL=t.MIGRATION_EXECUTE_SUCCESS=t.MIGRATION_EXECUTE_REQUEST=t.MIGRATION_CREATE_FAIL=t.MIGRATION_CREATE_SUCCESS=t.MIGRATION_CREATE_REQUEST=t.MIGRATION_SAVE_FAIL=t.MIGRATION_SAVE_SUCCESS=t.MIGRATION_SAVE_REQUEST=t.MIGRATION_FETCH_FAIL=t.MIGRATION_FETCH_SUCCESS=t.MIGRATION_FETCH_REQUEST=void 0,t.newMigration=o,t.updateMigration=a,t.fetchMigration=u,t.loadMigration=s,t.fetchMigrationByNumber=c,t.loadMigrationByNumber=l,t.saveMigration=d,t.executeMigration=I,t.declineMigration=f,t.deleteMigration=T,t.editMigration=_;var p=n(110),M=n(149),A=n(150),m=r(A),O=n(176),R=n(378),g=n(729),N=n(375),y=n(376),S="MIGRATION_NEW",h="MIGRATION_UPDATE",C=t.MIGRATION_FETCH_REQUEST="MIGRATION_FETCH_REQUEST",b=t.MIGRATION_FETCH_SUCCESS="MIGRATION_FETCH_SUCCESS",G=t.MIGRATION_FETCH_FAIL="MIGRATION_FETCH_FAIL",v=t.MIGRATION_SAVE_REQUEST="MIGRATION_SAVE_REQUEST",L=t.MIGRATION_SAVE_SUCCESS="MIGRATION_SAVE_SUCCESS",U=t.MIGRATION_SAVE_FAIL="MIGRATION_SAVE_FAIL",P=t.MIGRATION_CREATE_REQUEST="MIGRATION_CREATE_REQUEST",D=t.MIGRATION_CREATE_SUCCESS="MIGRATION_CREATE_SUCCESS",F=t.MIGRATION_CREATE_FAIL="MIGRATION_CREATE_FAIL",j=t.MIGRATION_EXECUTE_REQUEST="MIGRATION_EXECUTE_REQUEST",w=t.MIGRATION_EXECUTE_SUCCESS="MIGRATION_EXECUTE_SUCCESS",B=t.MIGRATION_EXECUTE_FAIL="MIGRATION_EXECUTE_FAIL",Q=t.MIGRATION_DECLINE_REQUEST="MIGRATION_DECLINE_REQUEST",k=t.MIGRATION_DECLINE_SUCCESS="MIGRATION_DECLINE_SUCCESS",x=t.MIGRATION_DECLINE_FAIL="MIGRATION_DECLINE_FAIL",H=t.MIGRATION_DELETE_REQUEST="MIGRATION_DELETE_REQUEST",V=t.MIGRATION_DELETE_SUCCESS="MIGRATION_DELETE_SUCCESS",X=t.MIGRATION_DELETE_FAIL="MIGRATION_DELETE_FAIL",q=t.EDIT_MIGRATION="EDIT_MIGRATION"}});